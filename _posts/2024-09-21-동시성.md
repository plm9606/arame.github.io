---
title: 동시성
categories: [jvm]
tags: [jvm, cs, jvm밑바닥까지파해치기, concurrency]
author: aram
toc: true
comment: true
---
# 동시성(Concurrency)

동시성은 여러 작업이 동일한 시간 범위 내에 실행되는 것을 말합니다. 이는 같은 순간에 실행되는 것을 의미하지는 않지만, 전체적으로 보았을 때 병렬로 처리되는 작업을 의미.

같은 시간에 함께 실행되는 의미가 아닌 같은 시기에 일어난 의미로 생각해야 한다.

- simultaneously at the same time (x)
- during the same period (o)

### 왜 중요한지?
멀티코어 CPU가 일반화됨에 따라 동시성 프로그래밍이 중요해졌다. 동시성이 없으면 하나의 코어만을 사용할 수 있어, 전체 시스템 자원을 효율적으로 활용하지 못하게 된다.

고성능 작업이나 IO작업의 경우 병렬, 비동기로 처리하면 시스템이 다른 작업을 계속할 수 있어 성능을 최적화 할 수 있다. 
분산 시스템과 클라우드 컴퓨팅이 널리 사용되게 되었다. 이러한 시스템에서는 여러 노드에서 병렬로 작업을 수행하고, 데이터를 동기화하는 등의 동시성 처리가 필요하다.


### 동시성을 구현하는 다양한 모델
- 멀티스레딩: 하나의 프로세스 내에서 여러 스레드를 실행하여 동시성을 구현. 메모리를 공유하여 데이터의 빠른 교환이 가능하지만 동기화 문제가 발생할 수 있다.
- 멀티프로세싱: 여러 프로세스를 실행하여 작업을 병렬로 처리. 각 프로세스는 독립적인 메모리 공간을 가지므로 안전하지만, 프로세스 간 통신이 상대적으로 느릴 수 있다.
- 이벤트 기반 모델: 이벤트 루프를 사용하여 비동기 작업을 처리.
- 태스크 및 코루틴: 고수준의 동시성 개념으로, 비동기 작업을 쉽게 관리.
- 액터 모델: 독립적인 액터들이 메시지 기반으로 상호작용하는 방식.

### 동시성 프로그래밍의 도전 과제
- 경쟁 조건: 여러 스레드가 같은 자원에 접근할 때 발생하는 문제로, 데이터 무결성을 해칠 수 있다.
- 데드락: 두 개 이상의 스레드가 서로의 실행을 무한정 대기하는 상태로, 시스템이 교착 상태에 빠진다.
- 디버깅과 테스트의 어려움: 동시성 프로그램은 예측하기 어려운 버그가 발생할 가능성이 높기 때문에 디버깅과 테스트가 어렵다.


## 동시성과 병렬성
동시성과 병렬성을 헷갈리지 말자

둘 이상의 코드 조각이 실행될 때
- 동시성 (Concurrency): 동시에 실행 중인 것"처럼" 행동하는 것
- 병렬성 (Parallelism): 실제로 동시에 실행되는 것
 
![alt text](/assets/img/consistency_image.png)

동시성을 얻으려면

- 실행 중의 코드의 다른 부분으로 실행을 전환할 수 있어야 함. Fiber, Thread, Process 등을 이용해 구현
 

병렬성을 얻으려면
- 2가지 일을 동시에 할 수 있는 하드웨어가 필요함.
여러 개의 코어, 여러 CPU, 네트워크에 연결된 여러 대의 컴퓨터 등을 이용해 구현


#### ref
https://velog.io/@dyllis/%EB%8F%99%EC%8B%9C%EC%84%B1%EC%9D%B4-%EB%AC%B4%EC%97%87%EC%9D%BC%EA%B9%8C
https://binux.tistory.com/169
